<!DOCTYPE html>
<html><head><meta charset="utf-8">
<title>Atom â†” Contents ê´€ê³„ë„</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0a0a0a; color: #fafafa; font-family: 'Pretendard', -apple-system, sans-serif; padding: 40px; }
  h1 { text-align: center; font-size: 24px; margin-bottom: 8px; }
  .subtitle { text-align: center; color: #888; font-size: 14px; margin-bottom: 40px; }
  .canvas { position: relative; width: 1100px; height: 620px; margin: 0 auto; }

  .box { position: absolute; border-radius: 12px; padding: 16px 20px; min-width: 180px; }
  .box h3 { font-size: 15px; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
  .box .field { font-size: 12px; color: #999; line-height: 1.8; font-family: 'SF Mono', monospace; }
  .box .field .pk { color: #FF6B35; }
  .box .field .fk { color: #4ECDC4; }

  .contents { left: 0; top: 80px; background: #1a1a1a; border: 2px solid #FF6B35; }
  .campaigns { left: 340; top: 20px; background: #1a1a1a; border: 2px solid #7C3AED; }
  .atoms { left: 680; top: 80px; background: #1a1a1a; border: 2px solid #3B82F6; }
  .variants { left: 680; top: 360px; background: #1a1a1a; border: 2px solid #10B981; }
  .series { left: 340; top: 360px; background: #1a1a1a; border: 2px solid #F59E0B; }
  .ideas { left: 0; top: 360px; background: #1a1a1a; border: 2px solid #888; }

  svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
  .arrow { stroke-width: 2; fill: none; }
  .label { font-size: 11px; fill: #888; font-family: 'SF Mono', monospace; }
  .card-label { font-size: 11px; fill: #666; font-family: sans-serif; }

  .legend { display: flex; gap: 24px; justify-content: center; margin-top: 30px; }
  .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; color: #888; }
  .legend-dot { width: 12px; height: 12px; border-radius: 3px; }

  .note { text-align: center; color: #555; font-size: 12px; margin-top: 16px; max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.8; }
  .cardinality { font-size: 13px; font-weight: 700; font-family: 'SF Mono', monospace; }
</style>
</head><body>
<h1>ğŸ¦ Campaign System â€” Entity Relationship</h1>
<div class="subtitle">Atomê³¼ Contentsì˜ ê´€ê³„ + ì „ì²´ ìº í˜ì¸ ë°ì´í„° ëª¨ë¸</div>

<div class="canvas">
  <svg viewBox="0 0 1100 620">
    <!-- contents â†’ campaigns (source_content_id) -->
    <path d="M 200 130 Q 270 80 340 80" class="arrow" stroke="#FF6B35" marker-end="url(#arrow-orange)"/>
    <text x="230" y="72" class="label" fill="#FF6B35">source_content_id</text>

    <!-- campaigns â†’ atoms -->
    <path d="M 540 120 L 680 140" class="arrow" stroke="#3B82F6" marker-end="url(#arrow-blue)"/>
    <text x="570" y="112" class="label" fill="#3B82F6">campaign_id</text>
    <text x="555" y="148" class="cardinality" fill="#3B82F6">1 : N</text>

    <!-- atoms â†’ variants -->
    <path d="M 770 280 L 770 360" class="arrow" stroke="#10B981" marker-end="url(#arrow-green)"/>
    <text x="780" y="320" class="label" fill="#10B981">atom_id</text>
    <text x="780" y="338" class="cardinality" fill="#10B981">1 : N</text>

    <!-- atoms â†’ contents (content_id, optional) -->
    <path d="M 680 200 Q 400 240 200 200" class="arrow" stroke="#FF6B35" stroke-dasharray="6,4" marker-end="url(#arrow-orange)"/>
    <text x="380" y="248" class="label" fill="#FF6B35">content_id (optional)</text>

    <!-- campaigns â†’ series -->
    <path d="M 440 200 L 440 360" class="arrow" stroke="#F59E0B" marker-end="url(#arrow-yellow)"/>
    <text x="448" y="280" class="label" fill="#F59E0B">series_id</text>
    <text x="448" y="298" class="cardinality" fill="#F59E0B">N : 1</text>

    <!-- ideas â†’ contents -->
    <path d="M 120 360 L 120 280" class="arrow" stroke="#888" stroke-dasharray="6,4" marker-end="url(#arrow-gray)"/>
    <text x="128" y="330" class="card-label">source_idea</text>

    <!-- Arrow markers -->
    <defs>
      <marker id="arrow-orange" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M 0 0 L 8 4 L 0 8 Z" fill="#FF6B35"/></marker>
      <marker id="arrow-blue" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M 0 0 L 8 4 L 0 8 Z" fill="#3B82F6"/></marker>
      <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M 0 0 L 8 4 L 0 8 Z" fill="#10B981"/></marker>
      <marker id="arrow-yellow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M 0 0 L 8 4 L 0 8 Z" fill="#F59E0B"/></marker>
      <marker id="arrow-gray" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto"><path d="M 0 0 L 8 4 L 0 8 Z" fill="#888"/></marker>
    </defs>
  </svg>

  <!-- Contents -->
  <div class="box contents">
    <h3>ğŸ“ contents</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      title, slug<br>
      body_md (ë³¸ë¬¸)<br>
      status (draftâ†’published)<br>
      category (ê°€ì´ë“œë¶/ì‹¤ì „/í¬ë¦¬ì—ì´í„°)<br>
      hook, core_message, cta<br>
      funnel_stage, tags[]
    </div>
  </div>

  <!-- Campaigns -->
  <div class="box campaigns">
    <h3>ğŸ¯ campaigns</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      title, funnel_stage<br>
      status (ideationâ†’published)<br>
      <span class="fk">source_content_id</span> â†’ contents<br>
      <span class="fk">series_id</span> â†’ series<br>
      seo_keywords, total_cost_usd
    </div>
  </div>

  <!-- Atoms -->
  <div class="box atoms">
    <h3>âš›ï¸ campaign_atoms</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      <span class="fk">campaign_id</span> â†’ campaigns<br>
      <span class="fk">content_id</span> â†’ contents (opt.)<br>
      channel (threads/x/brxce_guide)<br>
      format (short_text/long_text/carousel)<br>
      status (pendingâ†’published)<br>
      generation_config jsonb<br>
      scheduled_at, published_at
    </div>
  </div>

  <!-- Variants -->
  <div class="box variants">
    <h3>ğŸ§¬ campaign_variants</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      <span class="fk">atom_id</span> â†’ atoms<br>
      parent_id (íŠ¸ë¦¬ ë¶„ê¸°)<br>
      generation (ì„¸ëŒ€ ë²ˆí˜¸)<br>
      output jsonb {text/body}<br>
      feedback, is_selected<br>
      score, model, cost_usd
    </div>
  </div>

  <!-- Series -->
  <div class="box series">
    <h3>ğŸ“š campaign_series</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      title, description<br>
      ordering (ìˆœì„œ)
    </div>
  </div>

  <!-- Ideas -->
  <div class="box ideas">
    <h3>ğŸ’¡ ideas</h3>
    <div class="field">
      <span class="pk">id</span> uuid PK<br>
      title, description<br>
      status, tags[]
    </div>
  </div>
</div>

<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:#FF6B35"></div>Contents (CMS ì›ë³¸)</div>
  <div class="legend-item"><div class="legend-dot" style="background:#7C3AED"></div>Campaign (ì£¼ì œ ë‹¨ìœ„)</div>
  <div class="legend-item"><div class="legend-dot" style="background:#3B82F6"></div>Atom (ì±„ë„Ã—í¬ë§·)</div>
  <div class="legend-item"><div class="legend-dot" style="background:#10B981"></div>Variant (AI ìƒì„±ë³¸)</div>
  <div class="legend-item"><div class="legend-dot" style="background:#F59E0B"></div>Series (ë¬¶ìŒ)</div>
</div>

<div class="note">
  <strong>í•µì‹¬ íë¦„:</strong> Contents(ì›ë³¸) â†’ Campaign(ì£¼ì œ) â†’ Atom(ì±„ë„Ã—í¬ë§· ì¡°í•©) â†’ Variants(AI ë³€í˜•ë³¸ ë¹„êµ/ì„ íƒ)<br>
  <strong>Atom â†” Contents:</strong> Atomì˜ <code>content_id</code>ëŠ” ì„ íƒì  â€” brxce_guide ì±„ë„ atomë§Œ contentsì™€ ì§ì ‘ ì—°ê²°ë¨.<br>
  Campaignì˜ <code>source_content_id</code>ê°€ ì›ë³¸ ì½˜í…ì¸ ë¥¼ ê°€ë¦¬í‚¤ê³ , ì†Œì† atomë“¤ì€ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì±„ë„ë³„ ë³€í˜•ì„ ìƒì„±í•¨.<br>
  ì ì„  = optional FK / ê°„ì ‘ ì°¸ì¡°
</div>

</body></html>
